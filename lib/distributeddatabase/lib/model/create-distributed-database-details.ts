/**
 * Globally Distributed Database
 * Use the Globally Distributed Database service APIs to create and manage the Globally distributed databases.
 * OpenAPI spec version: 20250101
 *
 *
 * NOTE: This class is auto generated by OracleSDKGenerator.
 * Do not edit the class manually.
 *
 * Copyright (c) 2020, 2025, Oracle and/or its affiliates.  All rights reserved.
 * This software is dual-licensed to you under the Universal Permissive License (UPL) 1.0 as shown at https://oss.oracle.com/licenses/upl or Apache License 2.0 as shown at http://www.apache.org/licenses/LICENSE-2.0. You may choose either license.
 */

import * as model from "../model";
import common = require("oci-common");

/**
 * Details required for creation of the Globally distributed database.
 */
export interface CreateDistributedDatabaseDetails {
  /**
   * The [OCID](https://docs.oracle.com/iaas/Content/General/Concepts/identifiers.htm) of the Globally distributed database compartment.
   */
  "compartmentId": string;
  /**
   * The display name of the Globally distributed database.
   */
  "displayName": string;
  /**
   * Oracle Database version for the shards and catalog used in Globally distributed database.
   */
  "databaseVersion": string;
  /**
   * Unique name prefix for the Globally distributed databases. Only alpha-numeric values are allowed. First character
   * has to be a letter followed by any combination of letter and number.
   *
   */
  "prefix": string;
  /**
   * The collection of [OCID](https://docs.oracle.com/iaas/Content/General/Concepts/identifiers.htm) of the private endpoint associated with Globally distributed autonomous database.
   */
  "privateEndpointIds": Array<string>;
  /**
   * Sharding Methods for the Globally distributed database.
   */
  "shardingMethod": CreateDistributedDatabaseDetails.ShardingMethod;
  /**
   * The character set for the database.
   */
  "characterSet": string;
  /**
   * The national character set for the database.
   */
  "ncharacterSet": string;
  /**
   * Number of chunks in a shardspace. The value of chunks must be
   * greater than 2 times the size of the largest shardgroup in any shardspace. Chunks is
   * required to be provided for distributed databases being created with
   * SYSTEM shardingMethod. For USER shardingMethod, chunks should not be set in create payload.
   *  Note: Numbers greater than Number.MAX_SAFE_INTEGER will result in rounding issues.
   */
  "chunks"?: number;
  /**
   * The listener port number for the Globally distributed database. The listener port number
   * has to be unique for a customer tenancy across all distributed databases. Same port number should
   * not be re-used for any other distributed database.
   *  Note: Numbers greater than Number.MAX_SAFE_INTEGER will result in rounding issues.
   */
  "listenerPort": number;
  /**
   * The TLS listener port number for the Globally distributed database. The TLS listener port number
   * has to be unique for a customer tenancy across all distributed databases. Same port number should
   * not be re-used for any other distributed database. For BASE_DB and EXADB_XS based distributed databases,
   * tls is not supported hence the listenerPortTls is not needed to be provided in create payload.
   *  Note: Numbers greater than Number.MAX_SAFE_INTEGER will result in rounding issues.
   */
  "listenerPortTls"?: number;
  /**
   * The ons local port number for the Globally distributed database. The onsPortLocal has to be
   * unique for a customer tenancy across all distributed databases. Same port number should not be
   * re-used for any other distributed database.
   *  Note: Numbers greater than Number.MAX_SAFE_INTEGER will result in rounding issues.
   */
  "onsPortLocal": number;
  /**
   * The ons remote port number for the Globally distributed database. The onsPortRemote has to be
   * unique for a customer tenancy across all distributed databases. Same port number should not be
   * re-used for any other distributed database.
   *  Note: Numbers greater than Number.MAX_SAFE_INTEGER will result in rounding issues.
   */
  "onsPortRemote": number;
  /**
   * The Replication method for Globally distributed database. Use RAFT for Raft based replication.
   * With RAFT replication, shards cannot have peers details set on them. In case shards need to
   * have peers, please do not set RAFT replicationMethod. For all non RAFT replication cases (with or
   * without peers), please set replicationMethod as DG or do not set any value for replicationMethod.
   *
   */
  "replicationMethod"?: CreateDistributedDatabaseDetails.ReplicationMethod;
  /**
   * The Replication factor for RAFT replication based Globally distributed database. Currently supported values are 3, 5 and 7.
   *  Note: Numbers greater than Number.MAX_SAFE_INTEGER will result in rounding issues.
   */
  "replicationFactor"?: number;
  /**
   * The replication unit count for RAFT based distributed database. For RAFT replication based
   * Globally distributed database, the value should be at least twice the number of shards.
   *  Note: Numbers greater than Number.MAX_SAFE_INTEGER will result in rounding issues.
   */
  "replicationUnit"?: number;
  /**
   * The distributed database deployment type.
   *
   */
  "dbDeploymentType": CreateDistributedDatabaseDetails.DbDeploymentType;
  /**
   * Collection of shards for the Globally distributed database.
   */
  "shardDetails": Array<model.CreateDistributedDatabaseShardDetails>;
  /**
   * Collection of catalog for the Globally distributed database.
   */
  "catalogDetails": Array<model.CreateDistributedDatabaseCatalogDetails>;
  /**
   * The SSH public key for Global service manager instances.
   */
  "gsmSshPublicKey"?: string;
  "dbBackupConfig"?: model.DistributedDbBackupConfig;
  /**
   * Simple key-value pair that is applied without any predefined name, type or scope. Exists for cross-compatibility only.
   * Example: {@code {\"bar-key\": \"value\"}}
   *
   */
  "freeformTags"?: { [key: string]: string };
  /**
   * Defined tags for this resource. Each key is predefined and scoped to a namespace.
   * Example: {@code {\"foo-namespace\": {\"bar-key\": \"value\"}}}
   *
   */
  "definedTags"?: { [key: string]: { [key: string]: any } };
}

export namespace CreateDistributedDatabaseDetails {
  export enum ShardingMethod {
    User = "USER",
    System = "SYSTEM"
  }

  export enum ReplicationMethod {
    Raft = "RAFT",
    Dg = "DG"
  }

  export enum DbDeploymentType {
    ExadbXs = "EXADB_XS"
  }

  export function getJsonObj(obj: CreateDistributedDatabaseDetails): object {
    const jsonObj = {
      ...obj,
      ...{
        "shardDetails": obj.shardDetails
          ? obj.shardDetails.map(item => {
              return model.CreateDistributedDatabaseShardDetails.getJsonObj(item);
            })
          : undefined,
        "catalogDetails": obj.catalogDetails
          ? obj.catalogDetails.map(item => {
              return model.CreateDistributedDatabaseCatalogDetails.getJsonObj(item);
            })
          : undefined,

        "dbBackupConfig": obj.dbBackupConfig
          ? model.DistributedDbBackupConfig.getJsonObj(obj.dbBackupConfig)
          : undefined
      }
    };

    return jsonObj;
  }
  export function getDeserializedJsonObj(obj: CreateDistributedDatabaseDetails): object {
    const jsonObj = {
      ...obj,
      ...{
        "shardDetails": obj.shardDetails
          ? obj.shardDetails.map(item => {
              return model.CreateDistributedDatabaseShardDetails.getDeserializedJsonObj(item);
            })
          : undefined,
        "catalogDetails": obj.catalogDetails
          ? obj.catalogDetails.map(item => {
              return model.CreateDistributedDatabaseCatalogDetails.getDeserializedJsonObj(item);
            })
          : undefined,

        "dbBackupConfig": obj.dbBackupConfig
          ? model.DistributedDbBackupConfig.getDeserializedJsonObj(obj.dbBackupConfig)
          : undefined
      }
    };

    return jsonObj;
  }
}
